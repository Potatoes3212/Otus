>дз 1
# Выбор подхода к публикации API
## Бизнес контекст
B2C продукт существует в рамках экосистемы крупной компании.

Продукт предоставляет функции на собственных web/app витринах и на витринах продуктов экосистемы.

Собственные web/app приложения продукта обращаются к API сервисов напрямую.

Текущая система содержит более 80 микросервисов написанных разными разработчиками, какие-то сервисы соответствуют существующим стандартам качеста, а какие-то являеются legaсy. Контракты данных значительно отличаются от сервсиа к сервису, что ослажняет работу FrontEnd разработчиками.

Настроить мониторинг работы сервисов сложно из-за разных фремворков. 

legaсy сервисы хочется переписать, т.к. их модификация сильно ограничена и требует большого количества ресурсов.

**Пользователи:** 300.000+

**Дополнительный контекст**
* Сервис обладает понециалом к росту, по этому система должна легко масштабироваться
* В экосистеме сервиса существует несколько способов авторизации пользователя. Модуль авторизации является экосистемным и постоянно модифицируется. 
* Продукт активно развивается в любой момент может появиться запрос на новую фичу.

**Бизнес требования**
* Затраты на доработку должны быть небольшими, т.к. изменение подхода к API в ближайшей перспективе не принесут прибыль или новых пользователей.
* Необходимо учитывать возможность проведения A/B тестов.
* Упростить процесс модификации системы.

### Бизнес-цели и бизнес-драйверы

* Сложно подойти к переписыванию legacy сервисов, т.к. их API напрямую запрашивается с клиента. 
* В legacy сервисы невозможно интегрировать новые методы пользовательской авторизации.
* FrontEnd разработчикам неудобно разбираться в "зоопарке" API.
* Проведение A/B тестов невозможно т.к. может повлиять на работу всех витрин продукта.
* Ввод нового backend сервиса в промышленную эксплуатацию должен происходить легко. Желательно без необходимости изменений на Frontend, если сервис заменяет устаревший. 

### Бизнес-цель
Изменить подход к публикации API, чтобы система была легко модифицируема и могла масштабироваться под растущее количество пользователей.

##Стейкхолдеры

Стейкхолдер | Роль | Потребность
:---: | :---: | :---:
Пользователь|Пользуется продуктом. Приносит прибыль| Чтобы старые функции работали также или лучше и чтобы появлялись новые функции
Менеджер продукта| Отвечает за бизнесс показали и развитие продукта|Минимум ресурсов затрачивать на инфраструктурыне задачи и максимульно сфокусироваться на продуктовой разработке
BackEnd разработчики| Разрабатывают серверную часть продукта| Поменьше трогать легаси код. Работать с удобными фреймворками
FrontEnd разработчики| Разрабатывают клиентскую часть продукта|Использовать в разрабоотке удобные API интерфейсы с понятными контрактами данных
Экосистемные модули| Обязательные к интеграции в продукт функции| Продукт должне встраивать новые функции быстро и с минимальными затратами ресурсов

## Пользовательские истории
**UC-1: Внедрение нового алгоритма**
* Разработчик создал новый алгоритм выдачи истории перемещений
* Провести A/B тестирование, как его воспримут пользователи.

**UC-2: Настройка мониторинга**
* Для продуктовой фичи был создан новый микросервис
* Настроить мониторинг API методов, используемых в этом микросервисе

**UC-3: Замена устаревшего сервиса**
* Разработчики пересивали устаревший сервис
* Перевести запросы с продукта витрин на новый сервис

**UC-3: Внесение изменений в механизм авторизации пользователя**
* Экосистемный модуль доработал механизм авторизации пользвоателя
* Backend поддерживает изменения

**UC-4: Получение данных с устройства пользователя**
* Сервис принимает данные со смартфона пользователя по API
* Данные преобразуются и сохраняются на backend 
* Преобразованные данные отдаются пльзователям по API

## Атрибуты качества
* Продукт должен обладать высокой доступностью SLA 99.67%
* Наиболее нагруженные API методы должны выдерживать 2000 RPS
* Доработки инфрастуктуры для внедрения новой фичи должны занимать минимальное время
* Время выполнения запросов должно быть минимальным

## Бизнес контекст
## Текущая архитектура
## Критичные сценарии и критичные характеристики
**Критичные сценарии:**
* 1

**Критичные характеристики:**
* 1

## ADR 








![context_diagram](./context_diagram.png)

